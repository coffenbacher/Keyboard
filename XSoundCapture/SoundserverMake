# Taken from http://www.linuxjournal.com/articles/lj/0042/2204/2204l5.html
# Modifcations from MAS:
CC     = gcc
CFLAGS = -g -Wall

# Back to our regularly scheduled Makefile...

BIN    = rsoundserver soundserver_svc
GEN    = soundserver_clnt.c soundserver_svc.c soundserver_xdr.c soundserver.h
RPCCOM = rpcgen

INCLUDES = -I/usr/include/glib-2.0/ -I/usr/lib/glib-2.0/include/ -I/usr/include/cairo/ -I/usr/include/pango-1.0/ -I/usr/include/gdk-pixbuf-2.0/ `pkg-config --cflags --libs libpulse` `pkg-config --cflags --libs libpulse-simple`

all: $(BIN)

# rsoundserver (remote soundserver) is the client
rsoundserver: rsoundserver.o soundserver_clnt.o soundserver_xdr.o
	$(CC) -o $@ rsoundserver.o soundserver_clnt.o soundserver_xdr.o $(INCLUDES)

rsoundserver.o: rsoundserver.c soundserver.h
	$(CC) -g rsoundserver.c -c $(INCLUDES)

soundserver_svc: soundserver_proc.o soundserver_svc.o soundserver_xdr.o
	$(CC) -o $@ soundserver_proc.o soundserver_svc.o soundserver_xdr.o $(INCLUDES)

soundserver_proc.o: soundserver_proc.c soundserver.h
	$(CC) -c soundserver_proc.c $(INCLUDES)

graphics: graphics.c
	$(CC) -o $@ graphics.c $(INCLUDES)

$(GEN): soundserver.x
	$(RPCCOM) soundserver.x

clean cleanup:
	rm -f $(GEN) *.o $(BIN)

